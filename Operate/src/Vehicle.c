/************************************版权申明********************************************
**                            芜湖航飞科技股份有限公司
**                             http://www.hangfeikeji.com
**-----------------------------------文件信息----------------------------------------
** 文件名称:   Vehicle.c
** 修改时间:   2023-09-23
** 文件说明:   燃油车、电动车、工程车、低速车、摩托车、方向盘、氛围灯的报文
** 技术支持:  华工13855361411 微信egg_car 邮箱wuhuaviation@163.com
----------------------------------------------------------------------------------------*/
#include "Vehicle.h" //汽车硬控
#include "can.h"   //汽车CAN总线
#include "rs485.h"   //工业485总线

uint16_t FuelR[10]={1000,110,80,49,42,35,24,16,10,1};//∞,E,1/8,1/4,3/8,1/2,5/8,3/4,7/8,Full满油
uint16_t CoolR[10]={330,230,135,120,90,75,53,40,32,26};//40℃,50,60,70,75,80,90,100,110,120过热
uint16_t GasR[10]={330,230,135,120,90,75,53,40,32,26};//0.1Mpa,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0
uint16_t FluidR[10]={0,100,200,300,400,500,600,700,800,900};//机油压力是0-5V电压，1K上拉电阻

void Fuel(uint8_t Gear)//燃油档0-9
{
	K(29,1);K(30,0);K(31,0);K(32,0);//打开燃油
  DataR(FuelR[Gear]);//燃油的数字电阻档
}
void Cool(uint8_t Gear)//水温档0-9
{
	K(29,0);K(30,1);K(31,0);K(32,0);//打开水温
  DataR(CoolR[Gear]);//水温的数字电阻档
}
void Gas(uint8_t Gear)//气压档0-9
{
	K(29,9);K(30,0);K(31,1);K(32,0);//打开气压
  DataR(GasR[Gear]);//气压的数字电阻档
}
void Fluid(uint8_t Gear)//油压档0-9
{
	K(29,0);K(30,0);K(31,0);K(32,1);//打开油压
  DataR(FluidR[Gear]);//机油压力的数字电阻档
}

CanMsgTypeDef CANmsg[] =//帧类型=ID的长度，DLC=DATA的位数。
{
//00-00 第0号报文，是用户输入的缓存。允许用户修改。
	{0x0CF00400, {0x00, 0x00, 0x00, 0xda, 0x2e, 0x00, 0x00, 0x00}},  //触摸屏的默认录入
//01-08 高电平报警灯，行车灯
	{0x18FFD821, {0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00}}, //陕汽左转
	{0x18FFD821, {0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00}}, //陕汽远光
	{0x18FFD821, {0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00}}, //陕汽R档
	{0x18FFD821, {0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00}}, //陕汽N档
	{0x18FFD821, {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //位置
	{0x18FFD821, {0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //后雾
	{0x18FFD821, {0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //近光
	{0x18FFD821, {0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00}}, //陕汽右转
//09-16 低电平报警灯-状态控制
	{0x18FFD821, {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //充电
	{0x18FFD821, {0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00}}, //手刹
	{0x18FFD821, {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //预热
	{0x18FECA00, {0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //控制器故障陕汽OBD
	{0x18FFD821, {0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //润滑失效
	{0x18FFD821, {0x00, 0xaa, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //空滤堵塞
	{0x18FFD821, {0x00, 0xca, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //油水分离
	{0x18FFDC21, {0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //陕汽浮动桥
//17-24 新能源和安全
	{0x18FECA00, {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //卫星通讯
	{0x18FD7C00, {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //巡航
	{0x18FD7C00, {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //方向柱锁
  {0x610,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00}}, //充电提醒
	{0x610,      {0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00}}, //电机过热
	{0x18FECA00, {0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //气囊
	{0x18FECA00, {0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //胎压
	{0x18FECA00, {0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //门开
//25-32 排放报警
	{0x18FD7C00, {0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //DPF再生状态
	{0x18FD7C00, {0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //DPF再生提醒
	{0x18FD7C00, {0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00}}, //再生禁止
  {0x18FD7C00, {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00}}, //排气高温
	{0x18FECA00, {0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //司机提醒
	{0x610,      {0x00, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //安全带
	{0x610,      {0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //通讯正常
	{0x219,      {0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00}}, //ABS
//33-40 发动机故障码
  {0x18FECA00, {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08}}, //发动机故障
	{0x18FECA00, {0x00, 0xFF, 0x6E, 0x00, 0x03, 0x00, 0xFF, 0xFF}}, //冷却水温高
	{0x18FECA00, {0x00, 0xFF, 0xAE, 0x00, 0x03, 0x00, 0xFF, 0xFF}}, //燃油温度高
	{0x18FECA00, {0x00, 0xFF, 0x64, 0x00, 0x03, 0x00, 0xFF, 0xFF}}, //机油温度高
	{0x18FECA00, {0x00, 0xFF, 0x84, 0x00, 0x03, 0x00, 0xFF, 0xFF}}, //空气流量高
	{0x18FECA00, {0x00, 0xFF, 0x56, 0x02, 0x02, 0x00, 0xFF, 0xFF}}, //离合器开关
	{0x18FECA00, {0x00, 0xFF, 0xA5, 0x02, 0x05, 0x00, 0xFF, 0xFF}}, //起动机开路
	{0x18FECA00, {0x00, 0xFF, 0x55, 0x02, 0x0C, 0x00, 0xFF, 0xFF}}, //制动踏板坏

//41-50  发动机转速
	{0x0CF00400, {0x00, 0x00, 0x00, 0x18, 0x03, 0x00, 0x00, 0x00}}, //转速100
	{0x0CF00400, {0x00, 0x00, 0x00, 0x85, 0x0f, 0x00, 0x00, 0x00}}, //转速500
	{0x0CF00400, {0x00, 0x00, 0x00, 0x95, 0x17, 0x00, 0x00, 0x00}}, //转速750
	{0x0CF00400, {0x00, 0x00, 0x00, 0x22, 0x1f, 0x00, 0x00, 0x00}}, //转速1000
	{0x0CF00400, {0x00, 0x00, 0x00, 0xda, 0x2e, 0x00, 0x00, 0x00}}, //转速1500
	{0x0CF00400, {0x00, 0x00, 0x00, 0xd4, 0x36, 0x00, 0x00, 0x00}}, //转速1750
	{0x0CF00400, {0x00, 0x00, 0x00, 0x80, 0x3e, 0x00, 0x00, 0x00}}, //转速2000
	{0x0CF00400, {0x00, 0x00, 0x00, 0x20, 0x4e, 0x00, 0x00, 0x00}}, //转速2500
	{0x0CF00400, {0x00, 0x00, 0x00, 0xc0, 0x5d, 0x00, 0x00, 0x00}}, //转速3000
	{0x0CF00400, {0x00, 0x00, 0x00, 0x86, 0x6d, 0x00, 0x00, 0x00}}, //转速3500	
//51-60 燃油（电量）
  {0x18FFDA21, {0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x00}}, //一格
  {0x18FFDA21, {0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00}}, //二格
  {0x18FFDA21, {0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00}}, //三格
  {0x18FFDA21, {0x00, 0x00, 0x00, 0x35, 0x00, 0x00, 0x00, 0x00}}, //四格
  {0x18FFDA21, {0x00, 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00}}, //五格
  {0x18FFDA21, {0x00, 0x00, 0x00, 0x72, 0x00, 0x00, 0x00, 0x00}}, //六格
  {0x18FFDA21, {0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x00, 0x00}}, //七格
  {0x18FFDA21, {0x00, 0x00, 0x00, 0xa1, 0x00, 0x00, 0x00, 0x00}}, //八格
  {0x18FFDA21, {0x00, 0x00, 0x00, 0xea, 0x00, 0x00, 0x00, 0x00}}, //九格
	{0x18FFDA21, {0x00, 0x00, 0x00, 0xf5, 0x00, 0x00, 0x00, 0x00}}, //十格	
//61-70 水温
  {0x18FEEE00, {0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //40℃
	{0x18FEEE00, {0x5a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //50℃
	{0x18FEEE00, {0x64, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //60℃
	{0x18FEEE00, {0x6e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //70℃
	{0x18FEEE00, {0x73, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //80℃
	{0x18FEFF00, {0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //90℃
	{0x18FEEE00, {0x82, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //100℃
	{0x18FEEE00, {0x8c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //110℃
  {0x18FEEE00, {0x96, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //120℃
  {0x18FEEE00, {0xa0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //130℃
//71-80 机油
	{0x18FEEF00, {0x00, 0x00, 0x00, 0x19, 0x00, 0x00, 0x00, 0x00}}, //0.1MPa 电阻10欧姆
	{0x18FEEF00, {0x00, 0x00, 0x00, 0x32, 0x00, 0x00, 0x00, 0x00}}, //0.2MPa 56Ω
	{0x18FEEF00, {0x00, 0x00, 0x00, 0x4b, 0x00, 0x00, 0x00, 0x00}}, //0.3
	{0x18FEEF00, {0x00, 0x00, 0x00, 0x64, 0x00, 0x00, 0x00, 0x00}}, //0.4   89Ω
	{0x18FEEF00, {0x00, 0x00, 0x00, 0x7d, 0x00, 0x00, 0x00, 0x00}}, //0.5
	{0x18FEEF00, {0x00, 0x00, 0x00, 0x96, 0x00, 0x00, 0x00, 0x00}}, //0.6   125Ω
	{0x18FEEF00, {0x00, 0x00, 0x00, 0xAF, 0x00, 0x00, 0x00, 0x00}}, //0.7  	
	{0x18FEEF00, {0x00, 0x00, 0x00, 0xc8, 0x00, 0x00, 0x00, 0x00}}, //0.8   155Ω
  {0x18FEEF00, {0x00, 0x00, 0x00, 0xe1, 0x00, 0x00, 0x00, 0x00}}, //0.9
  {0x18FEEF00, {0x00, 0x00, 0x00, 0xfa, 0x00, 0x00, 0x00, 0x00}}, //1.0MPa 184Ω
//81-90 北汽温度
	{0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08}}, //-40℃
	{0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1c}}, //-20℃
	{0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x26}}, //-10℃
	{0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30}}, //0℃
	{0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3a}}, //10℃
	{0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x44}}, //20℃
	{0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4e}}, //30℃
	{0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x58}}, //40℃
  {0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x62}}, //50℃
  {0x612,      {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xCE}}, //60℃
//91-100 北汽车速
  {0x219,      {0x08, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //B0:08,B1:+1=+2km/h
	{0x219,      {0x08, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //20
	{0x219,      {0x08, 0x15, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //40
	{0x219,      {0x08, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //60
	{0x219,      {0x08, 0x2B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //80
	{0x219,      {0x08, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //100
	{0x219,      {0x08, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //120
	{0x219,      {0x08, 0x4b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //140
	{0x219,      {0x08, 0x56, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //160
	{0x219,      {0x08, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}, //>160	
};
